BEGIN;

CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

CREATE DOMAIN EMAIL AS TEXT CHECK ( value ~ '^[\w\-\.]+@([\w-]+\.)+[\w-]+$');

CREATE DOMAIN PASSWORD AS TEXT CHECK ( value ~ '^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{6,}$');

CREATE DOMAIN ZIPCODE AS text CHECK (
    -- 63000 √† 63999
    VALUE ~ '63\d{3}' 
);

-- BEGIN;
CREATE TABLE IF NOT EXISTS public.product(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  subtitle VARCHAR(100) NULL,
  description TEXT NOT NULL,
  image TEXT NULL,
  price NUMERIC(10,2) NOT NULL,
  is_new BOOLEAN NOT NULL DEFAULT FALSE,
  slug TEXT NULL,
  dimension TEXT NULL,
  weight NUMERIC(10,2) NULL,
  category VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS public.blog(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  title VARCHAR(100) NOT NULL,
  description TEXT NOT NULL,
  image TEXT NULL,
  interaction VARCHAR(100) NULL,
  slug VARCHAR(100) NULL,
  created_at timestamptz NOT NULL DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS public.delivery_area(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  city VARCHAR(100) NOT NULL,
  zipcode ZIPCODE NOT NULL,
  price NUMERIC(10,2) NOT NULL
);

CREATE TABLE IF NOT EXISTS public.user (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  email EMAIL NULL UNIQUE,
  password PASSWORD NULL,
  lastname VARCHAR(100) NULL,
  firstname VARCHAR(100) NULL,
  address JSON NULL,
  phone VARCHAR(20) NULL,
  role VARCHAR(50) NULL,
  newsletter_optin BOOLEAN NULL DEFAULT false,
  token TEXT NULL,
  expirationTime timestamptz NULL, 
  created_at timestamptz NOT NULL DEFAULT NOW(),
  update_at timestamptz NULL
);

CREATE TABLE IF NOT EXISTS public.order_details (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id uuid NOT NULL,
  booking_date TIMESTAMP NOT NULL,
  payment_id VARCHAR(100) NOT NULL,
  total NUMERIC(10, 2) NOT NULL,
  created_at timestamptz NOT NULL DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS public.payment_details (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  order_id uuid NULL,
  payment_id VARCHAR(100) NOT NULL UNIQUE,
  status VARCHAR(50) NOT NULL,
  amount NUMERIC(10, 2) NOT NULL,
  payment_mode VARCHAR(50) NOT NULL,
  payment_date TIMESTAMP NULL,
  created_at timestamptz NOT NULL DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS public.order_items (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  order_id uuid NOT NULL,
  product_id INTEGER NULL,
  quantity INTEGER NOT NULL,
  created_at timestamptz NOT NULL DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS public.review (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  description TEXT NOT NULL,
  author VARCHAR(50) NOT NULL,
  date VARCHAR(20) NOT NULL,
  star INTEGER NULL,
  source VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS public.special_day (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  date TIMESTAMP NOT NULL,
  plate_quantity INT NULL,
  closind_day BOOLEAN NULL,
  created_at timestamptz NOT NULL DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS public.voucher (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    voucher_id TEXT NOT NULL,
    expiration_date timestamptz NOT NULL,
    initial_amount NUMERIC(10,2) NOT NULL,
    amount_used NUMERIC(10,2) NULL,
    date_use timestamptz NULL,
    created_at timestamptz NOT NULL DEFAULT NOW()
);

-- ? FOREIGN KEY
ALTER TABLE order_items ADD FOREIGN KEY (order_id) REFERENCES order_details(id);
ALTER TABLE order_items ADD FOREIGN KEY (product_id) REFERENCES product(id);
ALTER TABLE order_details ADD FOREIGN KEY (user_id) REFERENCES public.user(id);
-- ALTER TABLE order_details ADD FOREIGN KEY (payment_id) REFERENCES payment_details(id);
-- replace by payment_details(payment_id)
ALTER TABLE order_details ADD FOREIGN KEY (payment_id) REFERENCES payment_details(payment_id);
ALTER TABLE payment_details ADD FOREIGN KEY (order_id) REFERENCES order_details(id);
ALTER TABLE public.product OWNER TO wakeup;
ALTER TABLE public.delivery_area OWNER TO wakeup;
ALTER TABLE public.user OWNER TO wakeup;
ALTER TABLE public.order_details OWNER TO wakeup;
ALTER TABLE public.payment_details OWNER TO wakeup;
ALTER TABLE public.order_items OWNER TO wakeup;
ALTER TABLE public.review OWNER TO wakeup;
ALTER TABLE public.special_day OWNER TO wakeup;
ALTER TABLE public.voucher OWNER TO wakeup;

-- ? FUNCTION TO CREATE USER, need object in args
CREATE OR REPLACE FUNCTION create_user(jsonb) RETURNS UUID AS $$
DECLARE
  user_id UUID;
BEGIN
  IF ($1 ? 'email' AND $1 ? 'password') THEN
    IF NOT EXISTS(SELECT U.email FROM "user" as U WHERE U.email = ($1->>'email')) THEN
      INSERT INTO "user"("email", "password", "role", "newsletter_optin")
      VALUES (
          COALESCE(($1 ->> 'email')::EMAIL, ''),
          COALESCE(($1 ->> 'password')::PASSWORD, ''),
          COALESCE(($1 ->> 'role')::TEXT, ''),
          COALESCE(($1 ->> 'newsletter_optin')::BOOLEAN, false))
      RETURNING id INTO user_id;
    ELSE
      RAISE NOTICE 'User already exists';
    END IF;
  ELSE
    INSERT INTO "user"("email", "lastname", "firstname", "address", "phone")
    VALUES (
          COALESCE(($1 ->> 'email')::EMAIL, ''),
          COALESCE(($1 ->> 'lastname')::TEXT, ''),
          COALESCE(($1 ->> 'firstname')::TEXT, ''),
          COALESCE(($1 ->> 'address')::JSON, null),
          COALESCE(($1 ->> 'phone')::TEXT, '')
          )
    RETURNING id INTO user_id;
  END IF;
    RETURN user_id;
END;
$$
LANGUAGE plpgsql;

-- ? FUNCTION TO UPDATE USER BY ID
CREATE OR REPLACE FUNCTION update_user(jsonb)
RETURNS VOID AS $$
  BEGIN
        -- Update user
        UPDATE "user"
        SET 
            "email" = COALESCE(($1 ->> 'email')::EMAIL, "email"),
            "password" = COALESCE(($1 ->> 'password')::TEXT, "password"),
            "lastname" = COALESCE(($1 ->> 'lastname')::TEXT, "lastname"), 
            "firstname" = COALESCE(($1 ->> 'firstname')::TEXT, "firstname"),
            "address" = COALESCE(($1 ->> 'address')::JSONB, "address"),
            "phone" = COALESCE(($1 ->> 'phone')::TEXT, "phone"),
            "role" = COALESCE(($1 ->> 'role')::TEXT, "role"),
            "newsletter_optin" = COALESCE(($1 ->> 'newsletter_optin')::BOOLEAN, "newsletter_optin"),
            "update_at" = NOW()
        WHERE "id" = ($1 ->> 'id')::UUID;
END;
$$
LANGUAGE plpgsql;

-- ? FUNCTION TO DELETE USER BY ID
CREATE OR REPLACE FUNCTION delete_user(userId UUID) RETURNS BOOLEAN AS
$$
DECLARE
    user_deleted BOOLEAN := false;
BEGIN
    -- Delete related records first
    UPDATE order_details 
    SET user_id = NULL
    WHERE user_id = userId;

    -- Delete the user
    DELETE FROM public.user
    WHERE id = userId;

    IF FOUND THEN
        user_deleted := true;
    END IF;

    COMMIT;
    RETURN user_deleted;
END;
$$
LANGUAGE plpgsql;

-- ? FUNCTION TO CREATE PAYMENT DETAILS, need object in args
CREATE OR REPLACE FUNCTION insert_payment_details(jsonb)
  RETURNS INTEGER
AS $$
DECLARE
  new_id INTEGER;
BEGIN
  INSERT INTO "payment_details"("amount", "status", "payment_mode", "payment_id","payment_date")
  VALUES(
    ($1 ->> 'amount')::NUMERIC(10, 2),
    ($1 ->> 'status')::VARCHAR(50),
    ($1 ->> 'payment_mode')::VARCHAR(50),
    ($1 ->> 'payment_id')::VARCHAR(100),
    to_timestamp(($1 ->> 'payment_date')::BIGINT)
  )
  RETURNING id INTO new_id;
  
  RETURN new_id;
END;
$$
LANGUAGE plpgsql;

-- ? FUNCTION TO CREATE ORDER, need object in args 
CREATE OR REPLACE FUNCTION insert_order_details(jsonb) 
RETURNS uuid AS $$
DECLARE
  new_id uuid;
BEGIN
  INSERT INTO public.order_details (
    user_id,
    total,
    booking_date,
    payment_id
  ) VALUES (
    		($1 ->> 'user_id')::uuid,
    		($1 ->> 'total')::NUMERIC(10, 2), 
    		($1 ->> 'booking_date')::TIMESTAMP,
        --! modification type payment_id en varchar
    		($1 ->> 'payment_id')::VARCHAR(100)
  ) RETURNING id INTO new_id;
  
  RETURN new_id;
END;
$$
LANGUAGE plpgsql;

-- ? TRIGGER FUNCTION TO UPDATE PAYMENT DETAILS ON INSERT ROW IN ORDER_DETAILS
CREATE OR REPLACE FUNCTION update_payment_details()
RETURNS TRIGGER AS $$
BEGIN
  UPDATE payment_details
  SET order_id = NEW.id
  --! CHANGE ID BY payment_id to set by id generated by paypal or stripe
  WHERE payment_id = NEW.payment_id;
  RETURN NEW;
END;
$$ 
LANGUAGE plpgsql;

CREATE TRIGGER order_details_trigger
AFTER INSERT ON order_details
FOR EACH ROW
EXECUTE FUNCTION update_payment_details();

--? FUNCTION CREATE ORDER_ITEMS using order_details.id, need json object
CREATE OR REPLACE FUNCTION insert_order_items(jsonb)
RETURNS INTEGER
AS $$
DECLARE
  new_id INTEGER;
BEGIN
  INSERT INTO order_items("order_id", "product_id", "quantity")
  VALUES (
    ($1 ->> 'order_id')::uuid,
    ($1 ->> 'product_id')::INT,
    ($1 ->> 'quantity')::INT
  )
  RETURNING id INTO new_id;
  
  RETURN new_id;
END;
$$
LANGUAGE plpgsql;

-- ? FUNCTION TO UPDATE PAYMENT STATUS BY PAYMENT ID
CREATE OR REPLACE FUNCTION update_payment_status_by_payment_id(
    p_payment_id VARCHAR(100),
    p_new_status VARCHAR(50)
) RETURNS VOID AS $$
BEGIN
    UPDATE public.payment_details
    SET status = p_new_status
    WHERE payment_id = p_payment_id;
    
    IF NOT FOUND THEN
        RAISE EXCEPTION 'No rows found for payment_id: %', p_payment_id;
    END IF;
END;
$$ LANGUAGE plpgsql;

-- ? FUNCTION TO CREATE EVENT ON DATE, need object in args
CREATE OR REPLACE FUNCTION create_special_day(jsonb)
RETURNS INTEGER
AS $$
DECLARE
  new_id INTEGER;
BEGIN
  INSERT INTO special_day("date", "plate_quantity", "closing_day")
  VALUES (
    COALESCE(($1 ->> 'date')::timestamptz),
    COALESCE(($1 ->> 'plate_quantity')::INT),
    COALESCE(($1 ->> 'closing_day')::BOOLEAN)
  )
  RETURNING id INTO new_id;
  
  RETURN new_id;
END;
$$
LANGUAGE plpgsql;

-- ? FUNCTION TO UPDATE EVENT ON DATE, need object in args
CREATE OR REPLACE FUNCTION update_special_day(jsonb)
RETURNS VOID AS $$
  BEGIN
        -- Update special_day
        UPDATE "special_day"
        SET 
            "plate_quantity" = COALESCE(($1 ->> 'plate_quantity')::INT, "plate_quantity"),
            "closing_day" = COALESCE(($1 ->> 'closing_day')::BOOLEAN, "closing_day")
        WHERE "date" = ($1 ->> 'date')::timestamptz;
END;
$$
LANGUAGE plpgsql;


-- ? VIEW to see all orders
CREATE VIEW getAllOrders AS 
SELECT
  u.id AS user_id,
  u.lastname AS user_lastname,
  u.firstname AS user_firstname,
  u.email AS user_email,
  u.phone AS user_phone,
  u.address AS user_address,
  od.booking_date AT TIME ZONE 'GMT-4' AS booking_date,
  od.total AS total_amount,
  pd.status AS payment_status,
  JSON_AGG(
    JSON_BUILD_OBJECT(
      'product_id', oi.product_id,
      'product_name', p.name,
	  'product_price', p.price,
	  'quantity', oi.quantity
    )
  ) AS products
FROM order_details od
JOIN payment_details pd ON od.payment_id = pd.payment_id
JOIN "user" u ON od.user_id = u.id
JOIN order_items oi ON od.id = oi.order_id
JOIN product p ON oi.product_id = p.id
WHERE pd.status = 'paid'
GROUP BY od.booking_date, od.total, pd.status, u.id, u.email
ORDER BY od.booking_date ASC;

-- ? View to see all order create by user
CREATE VIEW GetOrdersByUser AS
 SELECT u.id AS user_id,
    od.booking_date,
	od.total AS total_amount,
    pd.status AS payment_status,
    json_agg(json_build_object(
		'product_id',oi.product_id, 
		'product_name', p.name, 
		'product_price', p.price, 
		'quantity', oi.quantity)) 
		AS products
  FROM order_details od
    JOIN payment_details pd ON od.payment_id = pd.payment_id::text
    JOIN "user" u ON od.user_id = u.id
    JOIN order_items oi ON od.id = oi.order_id
    JOIN product p ON oi.product_id = p.id
  WHERE pd.status::text = 'paid'::text AND u.id = od.user_id
  GROUP BY od.booking_date, pd.status, u.id, u.email, od.total
  ORDER BY od.booking_date;

-- ? View to see all date available with plate quantity condition
CREATE VIEW getAllAvailableDates AS 
SELECT od.booking_date AT TIME ZONE 'GMT-4' AS booking_date, 
          SUM(oi.quantity) AS plate_quantity, 
          COUNT(od.id) AS order_count
        FROM 
        order_details od 
          INNER JOIN order_items oi ON od.id = oi.order_id 
          INNER JOIN payment_details pd ON od.id = pd.order_id 
          INNER JOIN product p ON oi.product_id = p.id
          WHERE 
          p.category = 'plateau'        
        AND pd.status = 'paid'
        AND od.booking_date > CURRENT_DATE
          GROUP BY 
            od.booking_date
            ORDER BY 
            od.booking_date ASC;

-- ? View to see all user
CREATE VIEW getAllUsers AS 
SELECT
    U.lastname,
    U.firstname,
    U.phone,
    U.email,
    U.address,
    jsonb_agg(jsonb_build_object('booking_date', od.booking_date, 'total_amount', od.total) 
    ORDER BY od.booking_date) AS booking_info
FROM public.user AS U
LEFT JOIN order_details AS od ON U.id = od.user_id
--! enlever U.address du group by, a tester
GROUP BY U.id, U.lastname, U.firstname, U.phone, U.email
ORDER BY U.lastname ASC;

ALTER VIEW getAllUsers OWNER TO wakeup;
ALTER VIEW getAllAvailableDates OWNER TO wakeup;
ALTER VIEW getOrdersByUser OWNER TO wakeup;
ALTER VIEW getAllOrders OWNER TO wakeup;

ALTER FUNCTION create_special_day(jsonb) OWNER TO wakeup;
ALTER FUNCTION create_user(jsonb) OWNER TO wakeup;
ALTER FUNCTION delete_user(userid uuid) OWNER TO wakeup;
ALTER FUNCTION insert_order_details(jsonb) OWNER TO wakeup;
ALTER FUNCTION insert_order_items(jsonb) OWNER TO wakeup;
ALTER FUNCTION insert_payment_details(jsonb) OWNER TO wakeup;
ALTER FUNCTION update_payment_status_by_payment_id(
    VARCHAR(100),
    VARCHAR(50)
) OWNER TO wakeup;
ALTER FUNCTION update_special_day(jsonb) OWNER TO wakeup;
ALTER FUNCTION update_user(jsonb) OWNER TO wakeup;


INSERT INTO public.product(name, subtitle, description, image, price, is_new, slug, dimension, category, weight)
	VALUES ('plateau bed & breakfast', 'Conseill√© pour 2-3 personnes', 'Brioche moelleuse artisanale\n
			Brioche aux p√©pites de chocolat artisanale\n Mini cr√™pes vanill√©es (fait-maison)\n Madeleines vanill√©es (fait-maison)\n Cake marbr√© (fait-maison)\n Fruits frais\n Pain artisanal tranch√©\n P√¢te √† tartiner et confiture (Alain Milliat).', 
			'plateau_bed_and_breakfast',
			34.90, true, 'bed-and-breakfast', '45 x 25 x 6','plateau', 1.8),
			('plateau brunch d''hiver', 'Conseill√© pour 2-3 personnes', 
			'Brioche moelleuse artisanale\n Pancakes vanill√©s (fait-maison)\n Mini cr√™pes vanill√©es (fait-maison)\n Madeleines vanill√©es (fait-maison)\n Cake marbr√© (fait-maison)\n Fourme d''Ambert\n Cream cheese √† l''huile d''olive et basilic frais\n Jambon Serrano affinage 12 mois\n Cantal entre deux AOP (lait cru)\n 
			Fruits frais, l√©gumes croquants\n Pain artisanal tranch√©\n P√¢te √† tartiner et confiture (Alain Milliat).', 
			'plateau_brunch_d_hiver', 
 			49.90, true, 'plateau-brunch-d-hiver', '45 x 25 x 6','plateau', 1.9),
			('plateau fall in love', 'Conseill√© pour 2 personnes', 
			'Brioche moelleuse artisanale\n Brioche aux p√©pites de chocolat artisanale\n Pancakes vanill√©s (fait-maison)\n Mini cr√™pes vanill√©es (fait-maison)\n Madeleines vanill√©es (fait-maison)\n Cake marbr√© (fait-maison)\n Fruits frais\n P√¢te √† tartiner et confiture (Alain Milliat).', 
			'plateau_fall_in_love', 29.90, true,'fall-in-love', 'diam. 24','plateau', 0.9),
			('mini brunch d''hiver', 'Conseill√© pour 2 personnes', 
			'Brioche moelleuse artisanale\n Pancakes vanill√©s (fait-maison)\n Mini cr√™pes vanill√©es (fait-maison)\n Madeleines vanill√©es (fait-maison)\n Cake marbr√© (fait-maison)\n Fourme d''Ambert\n Cream cheese √† l''huile d''olive et basilic frais\n Jambon Serrano affinage 12 mois\n Cantal entre deux AOP (lait cru)\n 
			Fruits frais, l√©gumes croquants\n Pain artisanal tranch√©\n P√¢te √† tartiner et confiture (Alain Milliat).', 
			'plateau_mini_brunch_d_hiver',29.90, true,'mini-brunch-hiver', 'diam. 24','plateau', 0.9),
			( 'burrata √† partager', 'Conseill√© pour 2-3 personnes', 
			'Burrata cr√©meuse de 300g au lait de Bufflone et huile d''olive\n Jambon de Parme 16 mois d''affinage\n Pain tranch√©\n Fruits frais et l√©gumes croquants.', 
			'plateau_burrata', 36.90, true, 'burrata', 'diam. 24','plateau', 0.9),
			('mini ap√©ritif', 'Conseill√© pour 3-4 personnes', 
			'Pain artisanal tranch√©\n Cantal entre deux AOP (lait cru)\n Fourme d''Ambert AOP (lait cru) \n Crottin de ch√®vre (lait cru)\n Jambon Serrano affinage 12 mois\n Pistaches s√©ch√©es et figues s√©ch√©es\n Fruits frais, l√©gumes croquants et olives verte\n Confitures (Alain Milliat).', 
			'mini_aperitif', 42.90, false, 'mini-aperitif', 'diam. 24', 'plateau', 1),
			('jus d''orange press√©', '', 
			'Bouteille de 25cl de jus d''orange frais press√© maison.', 
			'orange', 4.90, false,'jus-orange', '25cl', 'boisson', null),
			('prosecco riccadonna', '', 
			'Bouteille de Prosecco Riccadona de 37.5cl pour cr√©er un cocktail mimosas, 4cl de jus d''orange m√©lang√© √† 8cl de prosecco', 
			'prosecco', 
 			9.90, false,
 			'prosecco', '37.5cl', 'boisson',null),    
			('th√© noir - breakfast', '', 
			'Sachet de the noir breakfast Dammann', 
			'the_dammann', 
 			1, false,
 			'the-dammann', '1 sachet', 'boisson',null),
			('noeud ruban en lin', '', 
			'Offrez un plateau avec un joli noeud fait avec un large ruban en lin', 
			'ruban', 
 			3.90, false,
 			'ruban', '1 noeud', 'decoration',null);

INSERT INTO public.blog(
	title, description, image, interaction, slug)
	VALUES ('D√©couvrez nos plateaux','Succombez √†  nos plateaux gourmands, √©l√©gants et raffin√©s et passez un moment convivial et de partage avec vos proches. \n Nous s√©lectionnons des produits gourmands, et de qualit√© pour vous proposer le meilleur. \n Vous pouvez √©galement accompagner vos plateaux brunch avec une bouteille de Prosecco Riccadonna. Ce vin blanc p√©tillant aux fines bulles caract√©ris√© par sa fraicheur et ses notes fruit√©es accompagnera parfaitement l''un de nos brunch ou nos plateaux ap√©ritifs.', 'caroussel_1, caroussel_2, caroussel_3, caroussel_4, caroussel_5, caroussel_6,caroussel_7,caroussel_8', 'D√©couvrir', 'plateau'),
	('Offrez un moment de partage unique', 'Surprenez vos proches et offrez leur un petit-d√©jeuner gourmand livr√© √† domicile ! Une id√©e originale pour un anniversaire ou pour les f√™tes de fin d''ann√©e. \n Notre carte cadeau pr√™te √† offrir sera parfaite pour n''importe quelles occasions avec une jolie carte et son enveloppe √©l√©gante,  le cadeau parfait pour offrir un moment original et tr√®s gourmand ! \n Faites nous votre demande dans la rubrique Contact.', 'carte_cadeau', 'En savoir plus', 'prestation'),
	('Pour vos √©v√®nements', 'WAKE UP vous accompagne pour vos √©v√®nements tel qu''un anniversaire, un bapt√™me, pour un ap√©ritif dinatoire ou un lendemain de mariage.\n Nous sommes disponibles pour √©changer avec vous concernant vos envies pour cet √©v√®nement.\n Pour toute demande, merci de nous contacter au minimum 2 semaines √† l''avance.', 'prestation', 'Contact', 'contact'),
	('Pour vos entreprises','D√©couvrez nos plateaux business pour vos petits-d√©jeuners d''entreprise, vos r√©unions, vos teams building ou tout autre √©v√®nement d''entreprise. \n Du petit-d√©jeuner classique au petit-d√©jeuner avec une touche sal√©e, nos plateaux s''adapterons √† toutes les envies. \nPour toute demande, merci de nous contacter au minimum 2 semaines √† l''avance. Commande minimum sup√©rieure √† 75‚Ç¨.', 'business_homepage', 'En savoir plus', 'prestation');

INSERT INTO public.review (description, author, date, star, source)
	VALUES ('Comment ne pas mettre 5 √©toiles? D√©j√† c''est incroyablement beau. Plein de couleur et de relief. Et puis tout est tr√®s bon. Des viennoiseries aux fruits, du pain aux fromages etc... Rien n''est laiss√© au hasard. Bref √† ne pas 			louper. Juste incroyable', 'AurelASM', '02-2023', 5, 'google'),
	('La box √©tait un r√©gal aussi bien pour les yeux que pour le ventre üòÅ Les produits sont vraiment frais, tr√®s bons (petite mention sp√©ciale pour le cake vanill√© et les pains au chocolats üòç) et de qualit√©.
On rajoute √† √ßa une √©quipe super sympa que ce soit en √©change de mails ou √† la livraison.
Parfait du d√©but √† la fin, merci !', 'Laurie R.', '06-2023', 5, 'google'),
('Merci √† Wake Up pour cet excellent petit d√©jeuner. Rien n‚Äôest laiss√© au hasard : qualit√©, pr√©sentation et quantit√© sont au rendez-vous ! A consommer sans aucune mod√©ration. Nous nous sommes r√©gal√©s !', 'Nathalie P.', '08-2023', 5, 'google'),
('Super concept ! Plateau travaill√© avec grand soin, les produits maisons sont succulents et vari√©s. D‚Äôune grande qualit√© pour de l‚Äôemport√© et √† l‚Äôheure au point de rdv :)', 'Charlotte D.', '07-2023', 5, 'google' ),
('Un plateau incroyable !!! Id√©al pour 2 ! Produits de qualit√© ! Le m√©lange des saveurs √©tait parfait ! J‚Äôai d√©j√† h√¢te de tester les autres box !!! Vegetarian options: Il existe m√™me d‚Äôautres box speciales vegans et vegetariens ! Kid-friendliness: Viennoiseries, fruits parfaits pour les ptits nin‚Äôs !', 'Elisabeth M.', '04-2023', 5, 'google'), 
('Apr√®s plusieurs commandes, produits toujours au top ! Produits frais faits maison et tr√®s belle pr√©sentation. De quoi bien commencer le week-end ü§© Petit plus : livraison tr√®s ponctuelle avec un service chaleureux. Je recommande √† 100%', 'Olivia B.', '03-2023', 5, 'google'),
('Excellent ! Autant visuellement que gustativement ! Une livraison ponctuelle avec des personnes tr√®s sympa. Je recommande vivement les yeux ferm√©es (cake vanille super bon üòç)', 'Tiphanie R.', '06-2023', 5, 'google'),
('Des plateaux de qualit√© nous ont √©t√© servis √† l‚Äôoccasion du lendemain de notre mariage. La pr√©sentation √©tait √† l‚Äôimage des propositions du site et les go√ªts ont combl√© nos attentes. Nos invit√©s ont √©galement appr√©ci√© d√©guster ce petit-d√©jeuner.', 'M√©gane V.', '08-2023', 5, 'google'),
('Nouvelle commande chez Wake Up directement livr√© dans notre jardin pour nous laisser faire la grasse-matin√©e. Produits de qualit√©, de saison et vari√©s. Qualit√© prix tr√®s satisfaisant. Et quelques poissons offerts en ce lundi de P√¢ques !!
Toujours un succ√®s....', 'Christel M.', '04-2023', 5, 'google'),
('Commande ce jour d‚Äôun plateau best seller, incroyablement complet et vari√©s et surtout, produits de qualit√© extr√™mement bons!', 'Ludwig D.', '02-2023', 5, 'google'),
					('Que dire de plus si ce n''est parfait üëå Le froid est venu frapper √† notre porte quand soudain Wake up est arriv√© ! De la chaleur et des douceurs au petit d√©jeuner pr√©par√©es avec sinc√©rit√© et qualit√©. C''√©tait une surprise pour un anniversaire qui d√©buta dans l''originalit√©, la simplicit√© le tout fait maison, de saison et avec raison. Je recommencerai sans h√©siter !üëè', 'Johanna R', '01-2023', 5, 'google'),
					('Parfait! Des produits frais et fait maison et un joli packagin pour offrir ou se faire plaisir !^^', 'Rachel B.', '12-2022', 5, 'google'),
					('Une √©quipe au top, tr√®s arrangeante et gentille ! Petit d√©jeuner livr√© √† domicile dans une jolie box un vrai moment de douceur et gourmandise ! Des fruits de saison, des viennoiseries, cr√™pes madeleines d√©licieuses, jus d''orange frais‚Ä¶ tr√®s copieux et gourmand et plein d‚Äôautres petits plaisirs sal√©s‚Ä¶ et les gaufres sont mon coup de c≈ìur üòâ Je recommande √† 100%', 'Nadia E.', '11-2022', 5, 'google'),
					('On s''est r√©gal√©, un vrai moment de partage et de bonheur en famille ! Merci encore ! On se fera √ßa de nouveau rapidement üòÑ', 'Lise B.', '11-2022', 5, 'google'),
					('Comme d''habitude, exp√©rience au top: produits d√©licieux, choisis et cuisin√©s avec soin, box de qualit√© et joliment pr√©sent√©e. Quantit√©s plus que g√©n√©reuse, au top !', 'Lucas M.', '12-2022', 5, 'google'),
					('Nous avons pris la box Best Sellers et c‚Äô√©tait vraiment parfait. On sent que que les produits sont frais et fait maison. C''est tr√®s complet, vari√© en sucr√© et sal√© et pour 2 personnes c‚Äôest le top. On s''est r√©gal√©. Je recommande ‚ò∫Ô∏è', 'Johanna G.', '11-2022', 5, 'google'),
					('Profiter d''un dimanche cocooning avec un d√©licieux brunch en famille. La box est joliment pr√©sent√©e, les produits sont excellents et de qualit√© (cr√™pes, g√¢teau, madelaines, etc. fait maison)Vivement la prochaine commande!', 'Fanny M.', '11-2022', 5, 'google'),
					('Nous avons pris le plateau DOLCE VITA et nous n''avons pas √©t√© d√©√ßu! Une box compl√®te avec du sucr√© et du sal√© qui nous a totalement combl√©, ce qui est s√ªr, c‚Äôest qu''on recommandera', 'Tamara E.', '11-2022', 5, 'google'),
					('Plateau brunch d√©licieux et copieux. Des produits frais et de qualit√© ! La pr√©sentation est magnifique, c''est aussi beau que bon :-), l''heure de livraison est parfaitement respect√©e. Tout est parfait. D√©j√† h√¢te de passer une nouvelle commande.', 'Anne-Sophie M.', '11-2022', 5, 'google'),
					('Petit d√©jeuner bien pr√©sent√©, d√©licieux, et personne en charge de la livraison tr√®s aimable !!!', 'MI R', '10-2022', 5, 'google'),
					('Box brunch au top, livraison sympathique √† l''heure annonc√©e. On avait choisi la box √† 39euro, le contenu est d''un bon rapport qualit√©/prix. Si on pinaille, on aurait appr√©ci√© quelques crudit√©s (carottes ?) pour aller avec la sauce et une bouteille de jus un peu plus grande, c''√©tait juste pour deux. √Ä mon sens les pailles biod√©gradables sont sympathiques mais superflues. Dans l''ensemble c''√©tait donc tr√®s bien, je recommande ! :D', 'Ma√Ølys D.', '10-2022', 5, 'google'),
					('Merci pour ce magnifique brunch !!! C''√©tait exceptionnel !!! Nous avons eu que de superbes compliments ‚ú® Merci pour votre gentillesse', 'Manon V.', '07-2023',5 ,'instagram'),
					('Qu''est ce qu''on s‚Äôest r√©gal√©s ! Petits et grands ! Vous pouvez y aller les yeux ferm√©s ! Merci √† l‚Äô√©quipe WAKE UP !', 'Thomas L.', '10-2022', 5, 'google'),
					('Tr√®s beau rendu visuel, produits supers gourmands, livraison parfaite et horaires respect√©es ! Super moment pass√© entre copines.', 'Laetitia M.', '09-2022', 5, 'google'),
					('C''est la 3 √®me fois que nous prenons cette box et c''est toujours super bon , des produits de qualit√© et prix juste . Bravo üëè', 'St√©phane M.', '09-2022', 5, 'google'),
					('J''ai command√© une box sucr√©e. Il s''agit de ma 3 √®me d√©gustation Wake Up et la qualit√© est toujours au RDV. La box est super bien garnie et pr√©sent√©e. Les viennoiseries ont un feuilletage de dingue, et les fruits sont d√©licieux. Encore merci ‚ò∫Ô∏è √† une prochaine fois !', 'Lion Lulu', '07-2022', 5, 'google'),
					('La box Dreamy porte bien son nom ! C''√©tait un r√™ve de d√©guster ce d√©licieux petit d√©jeuner, tout est parfait, bien pr√©sent√©, tr√®s complet, service au top, je recommande +++ c''√©tait pour faire une surprise pour un anniversaire, et bien c''est r√©ussi ! J''ai h√¢te de refaire ma prochaine commande ! Merci √† vous', 'Oc√©ane', '05-2022', 5, 'google'),
					('Avons partag√© √† 2 le brunch, ce fut un d√©lice. Fait de viennoiserie fait maison et de produits annexes de d''excellentes qualit√©s, p√¢te √† tartiner et confiture. La livraison a √©t√© effectu√©e dans les temps impartis avec en prime le sourire de la personne qui nous a livr√©e. Excellente premi√®re exp√©rience, s√ªr je renouvellerai l''exp√©rience sans h√©siter. Merci √† toute l''√©quipe Wakeup', 'Myriam T.', '01-2022', 5, 'google'),
					('Je suis tr√®s satisfait du service. J''ai achet√© un petit-d√©jeuner pour mon petit ami d''Argentine et la livraison a √©t√© un succ√®s. Ils ont inclus un message personnel que je leur ai demand√© de faire, ils sont arriv√©s √† l''heure et la meilleure chose √©tait que les produits √©taient tr√®s bons. Ils m''ont fait me sentir proche de mon petit ami lors d''une journ√©e sp√©ciale et ils ont parfaitement compris ce dont j''avais besoin. Je recommande ce service √† 100%.', 'Nadia G.', '03-2022', 5, 'simplybook');
        

INSERT INTO public.delivery_area(city, zipcode, price)
	VALUES ('Aulnat','63510',3.5),
		('Lussat','63360',3.5),
		('Riom','63200',5.5),
		('Chamali√®res','63400',3.5),
		('Clermont-Ferrand','63100',3.5),
		('Clermont-Ferrand','63000',3.5),
		('Beaumont','63110',5.5),
		('Pont du Ch√¢teau','63430',3.5),
		('Gerzat','63360',3.5),
		('Aubi√®re','63170',3.5),
		('Lempdes','63370',3.5),
		('Romagnat','63540',5.5),
		('Cebazat','63118',3.5),
		('Le Cendre','63670',5.5),
		('Royat','63130',5.5),
		('Mozac','63200',5.5),
		('Blanzat','63112',3.5),
		('Ch√¢teaugay','63119',5.5),
		('Orcet','63670',5.5),
		('P√©rignat l√®s Sarli√®ve ','63170',5.5),
		('P√©rignat sur Allier','63800',5.5),
		('Ennezat','63720',5.5),
		('Sayat','63530',5.5),
		('Mezel','63115',5.5),
		('Saint-Beauzire','63360',3.5),
		('Les Martres d''Arti√®re','63430',3.5),
		('Durtol','63830',3.5),
		('Nohanent','63830',3.5),
		('M√©n√©trol','63200',5.5),
		('Chappes','63720',3.5),
		('Dallet','63111',3.5),
		('Malauzat','63200',5.5),
		('Joze','63350',5.5),
		('Malintrat','63510',3.5),
		('Chavaroux','63720',3.5),
		('Cournon-d''Auvergne','63800',5.5);
    
COMMIT;